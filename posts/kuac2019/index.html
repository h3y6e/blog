<!DOCTYPE html> <html lang=ja > <head prefix="og: https://ogp.me/ns#"> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1, maximum-scale=1" /> <meta name=author  content=heyhoe  /> <link type="text/plain" rel=author  href="https://h3y6e.com/humans.txt" /> <link rel=webmention  href="https://webmention.io/h3y6e.com/webmention" /> <link rel=pingback  href="https://webmention.io/h3y6e.com/xmlrpc" /> <link rel=me  href="https://fedibird.com/@h3y6e" /> <link rel=me  href="https://social.camph.net/@h3y6e" /> <meta name=theme-color  content="#2f2f2f" /> <link rel=stylesheet  href="/css/a5ebec.css" /> <link rel=icon  href="/assets/favicon/favicon.ico" /> <link rel=apple-touch-icon  href="/assets/favicon/apple-touch-icon.png" /> <meta property="og:site_name" content="#a5ebec" /> <meta property="og:image" content="https://res.cloudinary.com/dzugrdlkb/image/upload/c_fit,w_840,co_rgb:a5ebec,l_text:Firge35-Bold.ttf_50:%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%ABbot%E6%A9%9F%E8%83%BD%E3%82%92%E6%90%AD%E8%BC%89%E3%81%97%E3%81%A6%E9%81%8B%E7%94%A8%E3%81%97%E3%81%A6%E3%82%8B%E3%81%91%E3%81%A9%E6%84%8F%E5%A4%96%E3%81%A8%E4%B8%8A%E6%89%8B%E3%81%8F%E3%82%84%E3%81%A3%E3%81%A6%E3%82%8B/fl_layer_apply,g_south_west,x_180,y_355/co_rgb:a5ebec7f,l_text:Firge35-Regular.ttf_30:2019-12-08/fl_layer_apply,g_north_west,x_180,y_565/c_fit,w_840,co_rgb:d3d5d57f,l_text:Firge35-Regular.ttf_30:%23kuac%20%23adventcalendar%20%23twitter%20%23bot/fl_layer_apply,g_north_west,x_180,y_605/a5ebec-ogimage-left.png" /> <meta name="twitter:card" content=summary_large_image  /> <meta name="twitter:site" content="@h3y6e" /> <meta name="twitter:creator" content="@h3y6e" /> <head prefix="og: https://ogp.me/ns#"> <title> メインアカウントにbot機能を搭載して運用してるけど意外と上手くやってる :: #a5ebec </title> <meta name=description  content="僕のTwitterアカウントに付属している単位取得率botと降水量を教えてくれるbotについて" /> <meta property="og:type" content=article  /> <meta property="og:title" content="メインアカウントにbot機能を搭載して運用してるけど意外と上手くやってる :: #a5ebec" /> <meta property="og:url" content="https://blog.h3y6e.com/posts/kuac2019/index.html" /> <meta property="og:description" content="僕のTwitterアカウントに付属している単位取得率botと降水量を教えてくれるbotについて" /> <script src="/libs/theme/scripts/noflash.js"></script> <header> <div class=header-inner > <div class=header-logo > <a href="/"><div class=logo >#a5ebec</div></a> </div> <label for=menu-trigger  class=menu >menu</label> </div> <input type=checkbox  id=menu-trigger  /> <nav> <ul> <li><a href="/">Posts</a> <li><a href="/tags">Tags</a> <li><a href="https://twitter.com/h3y6e" rel=me >Twitter</a> <li><a href="https://github.com/h3y6e" rel=me >GitHub</a> <li><a href="/feed.xml">RSS</a> <li class=theme-switcher ><button id=theme-switcher >Theme</button> </ul> </nav> </header> <div class=franklin-headline > <h1 class=title >メインアカウントにbot機能を搭載して運用してるけど意外と上手くやってる</h1> <div class=date >2019-12-08</div><span class=tags ><a href="/tags/kuac">#kuac</a> <a href="/tags/adventcalendar">#adventcalendar</a> <a href="/tags/twitter">#twitter</a> <a href="/tags/bot">#bot</a> </span></div><div class=franklin-toc ><ol><li><a href="#経緯">経緯</a><li><a href="#ameyadar">Ameyadar</a><li><a href="#単位取得率bot">単位取得率bot</a><ol><li><a href="#機能">機能</a><li><a href="#工夫">工夫</a><li><a href="#botをメインアカウントに搭載するメリット">botをメインアカウントに搭載するメリット</a><li><a href="#botをメインアカウントに搭載するデメリット">botをメインアカウントに搭載するデメリット</a><li><a href="#おまけ">おまけ</a></ol><li><a href="#まとめ">まとめ</a></ol></div> <div class=franklin-content > <script async src="https://platform.twitter.com/widgets.js" charset=utf-8 ></script> <p>おはようございます、へいほぅです。<br/> この記事は <a href="https://adventar.org/calendars/4251">Kyoto University Advent Calendar 2019</a> の8日目の記事です。</p> <p>7日目は <a href="https://twitter.com/ku2m1">くに&#40;❛ω❛. <em>&#41; &#41;</em>みち</a>氏による <a href="https://note.com/hina0303_/n/n063d41022c90">『7月から記録している「幸福度」とそのグラフについて』</a> でした。飲酒時は幸福度が比較的高いという結果が面白いなと思いました。それぞれ一人で飲んでいたのか人と会って飲んでいたのかが気になりますね。 <br/> このアドベントカレンダーの前に書かれた <a href="https://note.com/hina0303_/n/nac465bf549cb">『&#91;雑感&#93;目の前の勇気に全力で』</a> もそうですが、くにみち氏は文章が上手くて羨ましいです。</p> <p>あと5日目の <a href="https://twitter.com/hanama_chem">はなま</a>君による <a href="https://casta46.hatenablog.com/entry/2019/12/05/000034">『ウイスキーはいいぞ』</a> は面白かったです。僕はウイスキーの知識は全然ですが、アイラモルトのArdbegとかは好きなのではなま君に色々教えてもらいたいなぁと思ったり。イチローズモルトは是非飲んでみたい。</p> <p>そして、京大のアドベントカレンダーを作ってくれた<a href="https://twitter.com/d0ra1998">ど&#40;∩❛ڡ❛∩&#41;ら</a>君と<a href="https://twitter.com/p1ass">ぷらす</a>君、ありがとうございます。 <br/></p> <p>今回は、僕のTwitterアカウントに付属しているbot機能について、<strong>あまり技術的ではない</strong>話をしようと思います。皆さん文章能力が高くて恐れ多いですが、僕は自然言語を書くのが本当に苦手なので、温かい目で見守るかブラウザバックしてください。</p> <h2 id="経緯"><a href="#経緯" class=header-anchor >経緯</a></h2> <p>僕が<a href="https://twitter.com/h3y6e">@h3y6e</a>としてTwitterを始めたのは約2年前、僕が二十歳の誕生日を迎えた時です。<br/> <blockquote class=twitter-tweet  data-theme=dark ><p lang=ja  dir=ltr >20歳になったのでTwitter始めようと思う <a href="https://twitter.com/hashtag/%E5%88%9D%E3%82%81%E3%81%A6%E3%81%AE%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88?src=hash&amp;ref_src=twsrc%5Etfw">#初めてのツイート</a></p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/976899377246568448?ref_src=twsrc%5Etfw">March 22, 2018</a></blockquote> </p> <p>Twitter自体は中学3年生から高校1年生にかけてやっていたのですが、受験勉強もあって辞めていました（Twitter開始日が2013年3月からになっているのはその為）。</p> <p>Twitterを再開するにあたり、単純にやるだけでは面白さが無いと思い、<strong>「メインアカウントでありながら皆に使ってもらえるbotにする」</strong>という設定でbot機能を搭載することにしました。</p> <p>ちなみに、言語は当時存在を知ったPython3系を用いており、heroku上で動かしています。<br/> では、僕のアカウントに搭載されている<strong>2つのbotについて</strong>紹介します。</p> <h2 id=ameyadar ><a href="#ameyadar" class=header-anchor >Ameyadar</a></h2> <p>これは完全に俺得な機能ですが、1時間先までの京大吉田キャンパス上空の予想降水量によって僕の名前の横にアイコンが付きます。 全く根拠のない数式によって、時間と雨量の2次元データを 🌂/🌦/☂️/🌧/☔/⛈/🌀 の7段階のアイコンに変換しています（適当に決めた割には意外と体験と合致している印です）。</p> <p><img src="/img/2019-12-08/ameyadar-example.jpg" alt="例:Ameyadar" /></p> <p>こんな感じ。</p> <p><strong>松屋行きたいけど傘持ってくべきかな？</strong>ってときにめちゃくちゃ役立ってます。<br/> <a href="https://github.com/h3y6e/Ameyadar">ソースコードは公開しております</a>ので、自分のアカウントにも導入したいという人は使ってみてください。勿論 <a href="https://twitter.com/h3y6e">@h3y6e</a> を見ていただいても良いです。</p> <h2 id="単位取得率bot"><a href="#単位取得率bot" class=header-anchor >単位取得率bot</a></h2> <p>さて、本日の主役です。</p> <h3 id="機能"><a href="#機能" class=header-anchor >機能</a></h3> <p>基本的な機能はbioにもありますが<strong>「<a href="https://twitter.com/h3y6e">@h3y6e</a> 宛に京大の講義名（正式名称）をツイートすると単位取得率を教えてくれる」</strong>これだけです。</p> <p>僕宛に科目名をメンションするだけで2013-2018年の平均単位取得率を返します。</p> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >物理学実験::国際高等教育院 の単位取得率は82.1%だよ😊</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1202217323739918338?ref_src=twsrc%5Etfw">December 4, 2019</a></blockquote> <h4 id="詳細"><a href="#詳細" class=header-anchor >「詳細」</a></h4> <p>その6年間の詳細が知りたい場合は、科目名の後に「詳細」と付けていただくことで各年の単位取得率と取得者数、履修者数が確認出来るようになっています。</p> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >物理学実験::国際高等教育院<br>平均単位取得率82.1%<br><br>年度 取得/履修者 取得率<br>2018 444/ 511　86.9%<br>2017 481/ 601　80.0%<br>2016 390/ 500　78.0%<br>2015 471/ 560　84.1%<br>2014 464/ 566　82.0%<br>2013 459/ 563　81.5%</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1202217470116810757?ref_src=twsrc%5Etfw">December 4, 2019</a></blockquote> <h4 id="シラバス"><a href="#シラバス" class=header-anchor >「シラバス」</a></h4> <p>ここからはおもちゃ機能（?）。シラバスが検索出来ます。 <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >単位取得率に加えてシラバスも検索出来るようにしました。<br>「<a href="https://twitter.com/h3y6e?ref_src=twsrc%5Etfw">@h3y6e</a> (科目名)::(部局) シラバス」でシラバスのURLが返ってくるはずです。<br>何の恩恵があるのかはよく分かりませんが、成績評価の方法とか教科書とか見たらいいんじゃないでしょうか。</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1150816280426889221?ref_src=twsrc%5Etfw">July 15, 2019</a></blockquote> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >物理学実験::<a href="https://t.co/sNq7sLXvtT">https://t.co/sNq7sLXvtT</a><a href="https://t.co/yvf41o3tZt">https://t.co/yvf41o3tZt</a></p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1202217546436554753?ref_src=twsrc%5Etfw">December 4, 2019</a></blockquote> （割と便利だと思っているので皆んな使って欲しいな〜）</p> <h4 id="占い"><a href="#占い" class=header-anchor >「占い」</a></h4> <p>最近、履修取り消し期間（12/2, 12/3）に合わせて「単位を取るか落とすかを占う」という悪魔のような機能が付きました。 <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >履修取り消し期間なので，単位取得率botに超高性能AIを搭載した． <a href="https://t.co/qgkBsHc9UG">pic.twitter.com/qgkBsHc9UG</a></p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1201142109199187968?ref_src=twsrc%5Etfw">December 1, 2019</a></blockquote> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >物理学実験::国際高等教育院 の単位取得率は82.1%だよ😊<br>あなたは単位を取れるかもしれません。</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1202217620247863296?ref_src=twsrc%5Etfw">December 4, 2019</a></blockquote> 画像を見れば分かりますが、単位取得率の確率で取れるか落とすかを言うだけです。</p> <h3 id="工夫"><a href="#工夫" class=header-anchor >工夫</a></h3> <p><strong>マニュアル不要</strong>で他の人が使っているのを見ればすぐに使え、<strong>文字数が出来るだけ少なくて済む</strong>ようにするという点には拘っています。プレフィックスやオプションを付けずに科目名を言うだけで反応するようにしているのはこのためです。</p> <p>これに関することとして、作ってから1年間ほどは<strong>メンションに科目名が含まれていたら</strong>返信するようにしていました。<br/> これにより所謂&quot;誤爆&quot;が起こるのですが、普通に使われるより誤爆の方がふぁぼやRTをされやすいので（悲しい）、<strong>誤爆を誘発することで結果的に認知されて皆に使ってもらえる</strong>と考えたのでこうしていました。 <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >論理回路 †工学部† の単位取得率は70.2%だよ。普通。</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1054297929916342272?ref_src=twsrc%5Etfw">October 22, 2018</a></blockquote> 今は有難いことに京大生以外のフォロワーも増えてきたので修正しています。</p> <p>言わずもがなですが、botをメインアカウントに付けているのは拘りですね。誤爆を引き起こす最大の要因です。<br/> この <strong>「bot機能をメインアカウントに搭載する」</strong> という行為のメリットとデメリットを以下に述べます。</p> <h3 id="botをメインアカウントに搭載するメリット"><a href="#botをメインアカウントに搭載するメリット" class=header-anchor >botをメインアカウントに搭載するメリット</a></h3> <h4 id="メインアカウントをフォローしてもらえる"><a href="#メインアカウントをフォローしてもらえる" class=header-anchor >メインアカウントをフォローしてもらえる</a></h4> <p>ありがとうございます。<br/> 単位取得率botを使用する目的でフォローしてくださる方はフォロー返ししているつもりなので、もしフォローをされていなければ何らかの方法で教えていただけると有難いです。</p> <h4 id="単位取得率の人と言われる単位取得率の人ですと言えば分かってもらえる"><a href="#単位取得率の人と言われる単位取得率の人ですと言えば分かってもらえる" class=header-anchor >「単位取得率の人」と言われる/「単位取得率の人です」と言えば分かってもらえる</a></h4> <p> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >講義名をリプすると単位取得率が返ってくる人です</p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1121608538298572801?ref_src=twsrc%5Etfw">April 26, 2019</a></blockquote> 「◯◯の人」と言われるのは嬉しいです。</p> <h4 id="多少は返信出来なくても許されると僕が勝手に思っているだけかもしれない"><a href="#多少は返信出来なくても許されると僕が勝手に思っているだけかもしれない" class=header-anchor >多少は返信出来なくても許される（と僕が勝手に思っているだけかもしれない）</a></h4> <p>ある程度の表記揺れには対応していますが、正式名称にしか反応出来ない以上、返信出来ないものはあります。 <br/> あくまで中身は人間であるので、返信出来なくても許されると信じています。<br/> てか許してください（手動で返信していると思っていた人もいるようです。それは流石に無理です）。</p> <h3 id="botをメインアカウントに搭載するデメリット"><a href="#botをメインアカウントに搭載するデメリット" class=header-anchor >botをメインアカウントに搭載するデメリット</a></h3> <h4 id="自分のツイート欄がbotによる返信で埋まる"><a href="#自分のツイート欄がbotによる返信で埋まる" class=header-anchor >自分のツイート欄がbotによる返信で埋まる</a></h4> <p>僕はTwitterクライアントとして <a href="https://tweetdeck.twitter.com/">TweetDeck</a> を使っているのですが、ユーザーのツイート欄は通常のツイートやリプライが同じ所に流れます。 結果として自分のツイート欄がほぼbotによる返信で埋まります。<br/> 自分のツイート/RTを見たいことは意外とあるので、Twitterの検索機能を用いて <code>from:h3y6e -filter:replies include:nativeretweets</code> の検索結果をTweetDeckのカラムにすることで確認出来るようにしています。</p> <figure><img src="/img/2019-12-08/user.jpg"/><figcaption>左が検索結果、右がユーザーのツイート欄。</figcaption></figure> <h4 id="メンションが地獄"><a href="#メンションが地獄" class=header-anchor >メンションが地獄</a></h4> <p>皆が単位取得率を気にする時期（新学期開始時、履修取り消し期間、期末試験直前）は通知欄がエグいことになります。モバイル版公式クライアントでは、ふぁぼやRTと違いメンションは通知が纏められないのでバズったときよりカオスになります。 この場合はプッシュ通知が五月蝿くなるので通知を切るのですが、botに対してではないメンションも通知オフになり、他のメンションによって流れて見逃してしまうことが多々ありました。 <br/> これに関しては、<strong>僕自身が会話しないことで対策としています</strong>（これは半分冗談ですが半分本気です。僕が「RTして空リプ」を多用するのはこれが原因の1つです）。 <br/> 更に、先程と同様にTwitterの検索機能を用いて <code>to:h3y6e -from:h3y6e -min_faves:1</code> の検索結果をTweetDeckのカラムとすることで、ふぁぼが付いていない自分宛のメンションの一覧が確認出来るようにしています。bot発動時は自動でふぁぼるようにし、その他のメンションには手動でふぁぼを付けるようにしているので、未読のメンションだけがここに流れるというわけです。 <br/> ただしこれには問題点があり、鍵垢は <code>min_faves</code> が判断出来ないらしくふぁぼが付いていても流れてきてしまいます。改善策があれば誰か教えてください。</p> <h3 id="おまけ"><a href="#おまけ" class=header-anchor >おまけ</a></h3> <p>運用していて面白かった出来事です。</p> <h4 id="大喜利"><a href="#大喜利" class=header-anchor >大喜利</a></h4> <p>たまにリプ欄が大喜利になるのが好きです。遊んでくれてありがとうございます。 <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >大学生の恋愛入門 †国際高等教育院† の単位取得率は43.2%だよ。がんばれ。</p>&mdash; ヒトデマン (@waitsushi) <a href="https://twitter.com/waitsushi/status/1122145600361730049?ref_src=twsrc%5Etfw">April 27, 2019</a></blockquote> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >コミさんの彼女論の単位取得率は20.0%だよ。やめとけ。</p>&mdash; こたなか (@KU_kotanaka) <a href="https://twitter.com/KU_kotanaka/status/1150285706645737472?ref_src=twsrc%5Etfw">July 14, 2019</a></blockquote> コミさん…😢</p> <h4 id="教員に認知される"><a href="#教員に認知される" class=header-anchor >教員に認知される</a></h4> <p>詳しくは言いませんが「その講義の担当教員に単位取得率botを利用される」という実績を解除してしまったときはどうしようかと思いました。絵文字にすることで社会性を獲得しました。<br/> <blockquote class=twitter-tweet  data-theme=dark  data-link-color="#a5ebec"><p lang=ja  dir=ltr >はい． <a href="https://t.co/M7aQoTRoSM">pic.twitter.com/M7aQoTRoSM</a></p>&mdash; へいほぅ (@h3y6e) <a href="https://twitter.com/h3y6e/status/1159081711856078853?ref_src=twsrc%5Etfw">August 7, 2019</a></blockquote> 面談で教授と相談する時にこの単位取得率botが役に立ったという意見を耳にしたこともあります。素直に喜んで良いのか分かりませんがありがとうございます。</p> <h2 id="まとめ"><a href="#まとめ" class=header-anchor >まとめ</a></h2> <p>まあ色々ありますが、メインアカウントにbot機能を搭載しての運用は出来ます。やる人がいるのかわかりませんが参考にしてみてください。 <br/> また、単位取得率botは気が向いた時にアップデートしていくつもりです。意見のある方は何らかの方法で僕に伝えてください。</p> <p>ここまで読んだ方は以下のボタンを押して是非使ってみて下さいね。 <br/> <a href="https://twitter.com/intent/tweet?screen_name=h3y6e" class=twitter-mention-button  data-size=large  data-text="物理学実験" data-lang=en  data-show-count=false >Tweet to @h3y6e</a> </p> <p><a href="https://adventar.org/calendars/4251">Kyoto University Advent Calendar 2019</a>の9日目の担当は<a href="https://twitter.com/by110416">110416</a>さんです。 <br/> 宜しくお願いします。</p> <footer class=page-foot > <p> Comment on <a href="https://twitter.com/intent/tweet?text=Reading%20%40h3y6e%27s%20https%3A%2F%2Fblog.h3y6e.com%2Fposts%2Fkuac2019%2Findex.html">Twitter</a> / <a href="https://elk.zone/intent/post?text=Reading%20%40h3y6e%40social.camph.net%27s%20https%3A%2F%2Fblog.h3y6e.com%2Fposts%2Fkuac2019%2Findex.html">Mastodon</a> </p> <p> <a href="https://github.com/h3y6e/blog/blob/master/posts/kuac2019.md"> &#xE0A0; Edit this page on GitHub </a> </p> <div class=copyright > <span> &copy; 2019-2024 <a href="https://h3y6e.com">heyhoe</a> </span> <span>::Powered py <a href="https://franklinjl.org/">Franklin.jl</a></span> </div> </footer> </div><script src="/libs/theme/scripts/switcher.js"></script>